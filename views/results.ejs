<%- include('partials/header') %>

<div class="container mt-4">
  <h2>Inspection Stations near <%= selectedTown %></h2>

  <% if (error) { %>
    <div class="alert alert-danger mt-3"><%= error %></div>
  <% } else if (stations.length === 0) { %>
    <div class="alert alert-warning mt-3">No results found.</div>
  <% } else { %>
    <div class="row mt-4">
      <% stations.forEach(station => { %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title mb-1"><%= station.name %></h5>
              <p class="mb-1"><strong>City:</strong> <%= station.city %></p>
              <p class="mb-1"><strong>Class:</strong> <%= station.class %></p>
              <p class="mb-2"><strong>Distance:</strong> <%= station.distance %> km</p>

              <% if (station.rating) { %>
                <p class="mb-2 text-warning"><strong>Google Rating:</strong> <%= station.rating %></p>
              <% } %>

              <% if (station.hours) { %>
                <p class="mb-2 small text-muted"><strong>Hours:</strong> <%= station.hours %></p>
              <% } %>

              <div class="mt-auto d-flex gap-2">
                <% if (station.callLink) { %>
                  <a href="<%= station.callLink %>" class="btn btn-success btn-sm">
                    ðŸ“ž Call
                  </a>
                <% } %>
                <% if (station.directions) { %>
                  <a href="<%= station.directions %>" target="_blank" rel="noopener" class="btn btn-primary btn-sm">
                    ðŸ§­ Directions
                  </a>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>

<%- include('partials/footer') %>
